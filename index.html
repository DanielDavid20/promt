<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Generador de Prompt - Comentario Negativo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="header">
    <h1>üß† Generador de Prompts Inteligente</h1>
    <p>Responde comentarios negativos en Facebook con argumentos s√≥lidos y respeto</p>
  </div>
  <form class="card" onsubmit="event.preventDefault(); generarPrompt();">
    <label for="tema">Tema del comentario</label>
    <textarea id="tema" class="input-autoresize" rows="1" placeholder="Ejemplo:Participaci√≥n pol√≠tica de las mujeres" autocomplete="off" required style="resize:none; min-height:60px;"></textarea>

    <label for="link">Link a la publicaci√≥n</label>
    <textarea id="link" class="input-autoresize" rows="1" placeholder="Ejemplo:https://facebook.com/post/12" autocomplete="off" required style="resize:none; min-height:38px;"></textarea>

    <label for="comentario">Comentario textual</label>
    <textarea id="comentario" class="input-autoresize" rows="2" placeholder="Escribe aqu√≠ el comentario negativo..." required style="resize:none; min-height:38px;"></textarea>

    <div class="actions">
      <button type="submit" class="gen">Generar Prompt</button>
    </div>
    <div class="textarea-wrapper" style="position:relative; width:100%; display:none;">
      <button id="btnEdit" type="button" class="edit-btn-bar" style="position:absolute; left:8px; top:-17px; display:flex; align-items:center; gap:6px; font-size:1em; background:#fff; border-radius:6px; border:1.5px solid #a78bfa; box-shadow:0 1px 4px rgba(60,72,88,0.10); color:#7c3aed; padding:3px 12px; cursor:pointer; transition:background 0.18s, color 0.18s; font-weight:600; z-index:4;">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 17.25V21h3.75l11.06-11.06a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0L3 17.25zm14.71-9.04a1.003 1.003 0 0 1 1.42 0l2.34 2.34a1.003 1.003 0 0 1 0 1.42l-1.13 1.13-3.76-3.76 1.13-1.13z" fill="#7c3aed"/></svg>
        Editar
      </button>
      <button id="btnScrollUp" type="button" class="scroll-btn" style="position:absolute; right:-5px; top:8px; z-index:3; display:flex; align-items:center; justify-content:center; font-size:1.3em; background:#fff; border-radius:50%; border:1.5px solid #e0e7ff; box-shadow:0 1px 4px rgba(60,72,88,0.10); width:28px; height:28px; cursor:pointer;">‚ñ≤</button>
      <textarea id="resultado" class="output-textarea" rows="18" style="resize:vertical; width:100%; min-height:320px;" readonly></textarea>
      <button id="btnScrollDown" type="button" class="scroll-btn" style="position:absolute; right:-5px; bottom:8px; z-index:3; display:flex; align-items:center; justify-content:center; font-size:1.3em; background:#fff; border-radius:50%; border:1.5px solid #e0e7ff; box-shadow:0 1px 4px rgba(60,72,88,0.10); width:28px; height:28px; cursor:pointer;">‚ñº</button>
    </div>
    <div class="copy-actions" style="display:flex; flex-direction:column; gap:10px; margin-top:10px; display:none;">
      <button id="copiarRedirigir" type="button" class="chatgpt" onclick="copiarYRedirigir()"><img src="img/chat gpt.png" alt="ChatGPT" class="icon-img-chatgpt" aria-hidden="true"/> Copiar y abrir ChatGPT</button>
      <button id="copiarRedirigirCopilot" type="button" class="copilot" onclick="copiarYRedirigirCopilot()"><img src="img/copilot.png" alt="Copilot" class="icon-img-copilot" aria-hidden="true"/> Copiar y abrir Copilot</button>
      <button id="copiarRedirigirGemini" type="button" class="gemini" onclick="copiarYRedirigirGemini()"><img src="img/gemini.png" alt="Gemini" class="icon-img-gemini" aria-hidden="true"/> Copiar y abrir Gemini</button>
    </div>
  </form>

  <!-- Modal personalizado -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <button class="close" onclick="cerrarModal()" aria-label="Cerrar ventana">&times;</button>
      <div id="modalMensaje"></div>
      <button onclick="continuarRedireccion()">Continuar</button>
    </div>
  </div>

  <div id="toast" class="toast"></div>

  <script>
    let redireccionURL = null;

    function generarPrompt() {
      const tema = document.getElementById("tema").value.trim();
      const link = document.getElementById("link").value.trim();
      const comentario = document.getElementById("comentario").value.trim();

      const prompt = `Quiero que me ayudes a responder a un comentario negativo en Facebook relacionado con el tema *${tema}*,  que fue publicado en el siguiente enlace:  ${link}.

El comentario dice: *"${comentario}"*.

Necesito que generes *5 posibles respuestas* que cumplan con lo siguiente:
- Sean claras, respetuosas y firmes.
- Est√©n fundamentadas en legislaci√≥n colombiana vigente (cita art√≠culos o leyes si aplica).
- Utilicen t√©cnicas de contraargumentaci√≥n, sin caer en provocaciones ni lenguaje ofensivo.
- Est√©n alineadas con los valores del Partido MIRA: respeto, coherencia y responsabilidad.
- Tengan en cuenta el contexto actual del pa√≠s y hechos verificables.

No incluyas explicaciones internas ni desarrollo adicional, solo las respuestas listas para publicar.`;

      const resultado = document.getElementById("resultado");
      resultado.value = prompt;
      document.querySelector('.textarea-wrapper').style.display = "block";
      document.querySelector('.copy-actions').style.display = "flex";
      // Scroll suave hacia el textarea
      setTimeout(() => {
        resultado.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }, 100);
    }

    function getPromptPlano() {
      const resultado = document.getElementById("resultado");
      return resultado.value;
    }

    function copiarYRedirigir() {
      const prompt = getPromptPlano();
      if (!prompt) return;
      navigator.clipboard.writeText(prompt).then(function() {
        mostrarModal("<strong>A continuaci√≥n ser√°s redirigido a ChatGPT.</strong><br><br>Para pegar tu prompt:<br>- <b>En computadora:</b> presiona <b>Ctrl + V</b> en el cuadro de texto.<br>- <b>En tel√©fono:</b> mant√©n presionado en el cuadro de texto y selecciona <b>'Pegar'</b>.", "https://chatgpt.com/?model=auto");
      });
    }

    function copiarYRedirigirCopilot() {
      const prompt = getPromptPlano();
      if (!prompt) return;
      navigator.clipboard.writeText(prompt).then(function() {
        mostrarModal("<strong>A continuaci√≥n ser√°s redirigido a Copilot.</strong><br><br>Para pegar tu prompt:<br>- <b>En computadora:</b> presiona <b>Ctrl + V</b> en el cuadro de texto.<br>- <b>En tel√©fono:</b> mant√©n presionado en el cuadro de texto y selecciona <b>'Pegar'</b>.", "https://copilot.microsoft.com/chats/36aEQkA7gcwf7JAgHKQYQ");
      });
    }

    function copiarYRedirigirGemini() {
      const prompt = getPromptPlano();
      if (!prompt) return;
      navigator.clipboard.writeText(prompt).then(function() {
        mostrarModal("<strong>A continuaci√≥n ser√°s redirigido a Gemini (Google).</strong><br><br>Para pegar tu prompt:<br>- <b>En computadora:</b> presiona <b>Ctrl + V</b> en el cuadro de texto.<br>- <b>En tel√©fono:</b> mant√©n presionado en el cuadro de texto y selecciona <b>'Pegar'</b>.", "https://gemini.google.com/?hl=es");
      });
    }

    function mostrarToast(mensaje) {
      const toast = document.getElementById('toast');
      toast.textContent = mensaje;
      toast.style.display = 'block';
      setTimeout(() => {
        toast.style.display = 'none';
      }, 2000);
    }

    function mostrarModal(mensaje, url) {
      mostrarToast('Prompt copiado exitosamente');
      setTimeout(() => {
        document.getElementById('modalMensaje').innerHTML = mensaje;
        document.getElementById('modal').style.display = 'flex';
        redireccionURL = url;
      }, 2000);
    }

    function cerrarModal() {
      document.getElementById('modal').style.display = 'none';
      redireccionURL = null;
    }

    function continuarRedireccion() {
      if (redireccionURL) {
        window.location.href = redireccionURL;
      }
    }

    // Funcionalidad de los botones de scroll
    document.addEventListener('DOMContentLoaded', function() {
      const resultado = document.getElementById('resultado');
      const btnUp = document.getElementById('btnScrollUp');
      const btnDown = document.getElementById('btnScrollDown');
      btnUp.addEventListener('click', function(e) {
        e.preventDefault();
        resultado.scrollBy({ top: -resultado.clientHeight * 0.2, behavior: 'smooth' });
      });
      btnDown.addEventListener('click', function(e) {
        e.preventDefault();
        resultado.scrollBy({ top: resultado.clientHeight * 0.2, behavior: 'smooth' });
      });
    });

    // Funcionalidad del bot√≥n de edici√≥n tipo barra
    document.addEventListener('DOMContentLoaded', function() {
      const resultado = document.getElementById('resultado');
      const btnEdit = document.getElementById('btnEdit');
      let editando = false;
      btnEdit.addEventListener('click', function(e) {
        e.preventDefault();
        editando = !editando;
        resultado.readOnly = !editando;
        if (editando) {
          resultado.focus();
          btnEdit.style.background = '#a78bfa';
          btnEdit.style.color = '#fff';
          btnEdit.querySelector('svg path').setAttribute('fill', '#fff');
          btnEdit.childNodes[2].textContent = ' Editando';
        } else {
          btnEdit.style.background = '#fff';
          btnEdit.style.color = '#7c3aed';
          btnEdit.querySelector('svg path').setAttribute('fill', '#7c3aed');
          btnEdit.childNodes[2].textContent = ' Editar';
        }
      });
    });

    // Autoajuste de altura para los nuevos textareas
    document.addEventListener('input', function(e) {
      if (e.target && e.target.classList.contains('input-autoresize')) {
        e.target.style.height = 'auto';
        e.target.style.height = e.target.scrollHeight + 'px';
      }
    });
  </script>
</body>
</html>
